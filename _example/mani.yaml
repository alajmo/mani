projects:
  - name: example
    path: .

  - name: pinto
    path: frontend/pinto
    url: git@github.com:alajmo/pinto
    description: A vim theme editor
    tags:
      - frontend

  - name: dashgrid
    path: frontend/dashgrid
    url: git@github.com:alajmo/dashgrid
    description: A highly customizable drag-and-drop grid
    tags:
      - frontend

  - name: template-generator
    url: git@github.com:alajmo/template-generator
    description: A simple bash script used to manage boilerplates
    tags:
      - cli
      - bash

shell: bash -c

env:
  DATE: $(date -u +"%Y-%m-%dT%H:%M:%S%Z")
  VERSION: v5.1.0

tasks:
  - name: print-branch
    tags: [frontend]
    projects: [template-generator]
    env:
      branch: master
    command: echo $branch

  - name: sleep
    command: sleep 2

  - name: multi-line-node
    shell: node -e
    command: |
      console.log("Hello World")

  - name: print-env
    env:
      VERSION: $(echo v5.1.2)
    command: |
      echo "VERSION: $VERSION"
      echo "DATE: $DATE"

      print_message() {
        echo $1
      }

      print_message "1st line"
      print_message "2nd line"

  - name: print-default-mani-envs
    command: |
      echo $MANI_CONFIG_PATH
      echo $MANI_CONFIG_DIR
      echo $MANI_PROJECT_NAME
      echo $MANI_PROJECT_URL
      echo $MANI_PROJECT_PATH

  - name: git-status
    env:
      HELLO: World
    command: echo 123
    commands:
      - name: local-diff
        command: git diff --name-only | wc -l

      - name: remote-diff
        command: |
          current_branch=$(git rev-parse --abbrev-ref HEAD)
          git diff "$current_branch" "origin/$current_branch" --name-only 2> /dev/null | wc -l

# tasks:
#   - name: sleep
#     command: sleep 2
#
#   - name: git-status
#     commands:
#       - name: local-diff
#         command: git diff --name-only | wc -l
#
#       - name: remote-diff
#         command: |
#           current_branch=$(git rev-parse --abbrev-ref HEAD)
#           git diff "$current_branch" "origin/$current_branch" --name-only 2> /dev/null | wc -l
