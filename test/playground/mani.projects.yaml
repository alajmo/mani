import:
  - tmp/mani.yaml

projects:
  - name: example
    path: .

  - name: pinto
    path: frontend/pinto
    url: git@github.com:alajmo/pinto
    description: A vim theme editor
    tags: [frontend]

  - name: dashgrid
    path: frontend/dashgrid
    url: git+ssh://git@github.com/alajmo/dashgrid.git
    # clone: git clone git@github.com:alajmo/dashgrid # default
    description: A highly customizable drag-and-drop grid
    tags: [frontend]

  - name: template-generator
    url: git@github.com:alajmo/template-generator
    description: A simple bash script used to manage boilerplates
    tags: [cli, bash]

theme:
  table: ascii
  tree: line

env:
  DATE: $(date -u +"%Y-%m-%dT%H:%M:%S%Z")
  VERSION: v5.1.0
  GIT: git --no-pager

tasks:
  - name: sleep
    command: |
      sleep 2;
      echo "$MANI_PROJECT_NAME: Slept for 2 seconds"

  - name: echo-filter
    target:
      dirs: []
    command: echo "hello world"

  - name: echo
    command: |
      kaka=$(echo 123)
      echo $kaka
      echo "hello world"

  - name: git-status
    command: $GIT status

  - name: git-log
    command: git shortlog -s -n --all --no-merges

  - name: default-tags
    tags: [frontend]
    command: pwd

  - name: default-projects
    tags: [pinto]
    command: pwd

  - name: multi-line-node
    description: Multiline node command
    shell: node -e
    command: console.log("Hello World")

  - name: print-env
    env:
      VERSION: $(echo v5.1.2)
    command: |
      echo "VERSION: $VERSION"
      echo "DATE: $DATE"
      echo $MANI_CONFIG_PATH
      echo $MANI_CONFIG_DIR
      echo $MANI_PROJECT_NAME
      echo $MANI_PROJECT_URL
      echo $MANI_PROJECT_PATH

  - name: cmdRefs
    # output: table
    abort: false
    commands:
      - command: lsjfdjshfd
      - task: print-123
      - task: print-123
      - task: print-123
      - task: print-123
      - task: print-123

  - name: submarine
    output: table
    command: echo task
    env:
      TASK: submarine task
      FOO: FOO
    commands:
      - name: branch
        command: echo branch

      - name: local diff
        command: sleep 4

      - name: remote diff
        command: echo remote diff

      - name: node cmd
        shell: node -e
        command: console.log("node")

      - name: TASK
        env:
          FOO: BAR
          BAR: BAR
        command: |
          echo "TASK: $TASK"
          echo "FOO: $FOO"
          echo "BAR: $BAR"
