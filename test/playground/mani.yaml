# IMPORTS
import:
  - ./tmp/projects.yaml

# PROJECTS
projects:
  example:
    path: .

  tap-report:
    path: frontend/tap-report
    url: https://github.com/alajmo/tap-report
    desc: A tap report theme
    tags: ["frontend", "software"]
    env:
      BRANCH: main

  dashgrid:
    path: frontend/dashgrid
    url: git+ssh://git@github.com/alajmo/dashgrid.git
    # clone: git clone git@github.com:alajmo/dashgrid # default
    desc: A highly customizable drag-and-drop grid
    tags: [frontend, kaka]
    env:
      FOO: bar

  template-generator:
    url: git@github.com:alajmo/template-generator
    desc: A simple bash script used to manage boilerplates
    tags: [cli, bash]

# GLOBAL ENVS
env:
  VERSION: v0.1.0
  GIT: git --no-pager
  DATE: $(date -u +"%Y-%m-%dT%H:%M:%S%Z")

# TASKS
tasks:
  test:
    desc: simple test task
    target: single-project
    spec:
      omit_empty: lala
      parallel: hej
    # commands:
    #   - task: damn
    cmd: echo "hello world"

  git-status: git status

  echo:
    desc: Print hello world
    cmd: echo "hello world"
    spec: advanced
    spec: lala
    # spec: lala

  ping:
    desc: ping server
    cmd: echo pong

  sleep:
    desc: Sleep 5 seconds
    cmd: sleep 5

  status:
    desc: git status
    target: single-project
    spec:
      output: text
    commands:
      - mcd: git status
      - cmd: git branch
    cmd: echo done

  text:
    desc: test text info
    env:
      BRANCH: lala
      FOO: bar
    target: single-project
    spec:
      output: text
    commands:
      - task: echo
      - cmd: echo lala
      # - task: troll
    cmd: echo hi

  table:
    env:
      BRANCH: lala
      FOO: bar
    target: single-project
    spec:
      output: table
    commands:
      - task: echo
      - cmd: echo lala
    cmd: echo hi

  install:
    desc: npm install
    cmd: npm install

  fail:
    desc: fail on purpose
    cmd: |
      echo "FAILED"
      exit 1

  node:
    target: all
    shell: node
    cmd: console.log("Running node.js example")

  random-data:
    desc: generate random data
    cmd: |
      jot -r 1
      echo "RANDOM-DATA"
      jot -r 2
      sleep 2
      jot -r 2
      sleep 2

  many:
    desc: run many tasks
    env:
      BRANCH: lala
      HELLO: WORLD
    target: all
    spec: advanced

    commands:
      - task: node
      - task: echo
      - task: random-data
      - task: ping

    cmd: echo "DONE"

# SPECS
specs:
  default:
    output: table
    parallel: false
    ignore_error: false
    # omit_empty: kaka

  hi:
    parallel: kaka

  advanced:
    output: table
    parallel: false
    ignore_error: true
    omit_empty: false

# TARGETS
targets:
  default:
    all: true
    cwd: true

  single-project:
    projects: [tap-report]

  all:
    all: true

# THEMES

themes:
  default:
    tree:
      style: connected-light

    text:
      prefix: true
      header: true
      header_char: "-"
      # colors: ["blue", "red"]

    table:
      style: ascii

      format:
        header: title
        row: default

      options:
        draw_border: true
        separate_columns: true
        separate_header: true
        separate_rows: false
        separate_footer: true

      color:
        header:
          project:
            fg: white
            bg: black
            align: left
            attr: bold

          tag:
            fg: green
            bg: black
            align: right
            attr: normal

          desc:
            fg: red
            # bg: black
            align: center
            attr: bold

          task:
            fg: blue
            # bg: black
            align: left
            attr: bold

          rel_path:
            fg: green
            # bg: black
            align: right
            attr: normal

          path:
            fg: green
            # bg: black
            align: right
            attr: normal

          url:
            fg: green
            # bg: black
            align: right
            attr: normal

          output:
            fg: hi_red
            # bg: black
            align: left
            attr: normal

        row:
          project:
            fg: hi_red
            bg: black
            align: left
            attr: normal

          tag:
            fg: magenta
            bg: black
            align: left
            attr: normal

          desc:
            fg: green
            # bg: black
            align: right
            attr: normal

          task:
            fg: yellow
            # bg: black
            align: right
            attr: normal

          rel_path:
            fg: green
            bg: black
            align: right
            attr: normal

          path:
            fg: green
            bg: black
            align: right
            attr: normal

          url:
            fg: green
            bg: black
            align: right
            attr: normal

          output:
            fg: hi_yellow
            bg: black
            align: left
            attr: normal

        border:
          header:
            fg: yellow
            bg: black

          row:
            fg: yellow
            bg: black

          row_alt:
            fg: yellow
            bg: black

          footer:
            fg: yellow
            bg: black
