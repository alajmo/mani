import:
  - tmp/mani.yaml

env:
  DATE: $(date -u +"%Y-%m-%dT%H:%M:%S%Z")

networks:
  local:
    description: localhost
    user: samir
    hosts:
      - 0.0.0.0
    tags: [local]

  server:
    description: Server IP's
    hosts:
      - 192.168.0.107
      - 192.168.0.110
    tags: [server]

  media:
    description: media
    hosts:
      - 192.168.0.110
    tags: [media]

  # server:
  #   description: Server IP's
  #   hosts:
  #     - host: 192.168.0.107
  #       name: server-1
  #       user: samir
  #     - host: 192.168.0.110
  #       name: media
  #       user: root
  #   tags: [server]

tasks:
  - name: echo
    command: |
      kaka=$(echo 123)
      echo $kaka
      echo "hello world"

  - name: echo-filter
    target:
      dirs: []
    command: echo "hello world"

  - name: cmdRefs
    # output: table
    abort: false
    commands:
      - command: lsjfdjshfd
      - task: print-123
      - task: print-123
      - task: print-123
      - task: print-123
      - task: print-123

  - name: submarine
    output: table
    command: echo task
    env:
      TASK: submarine task
      FOO: FOO
    commands:
      - name: branch
        command: echo branch

      - name: local diff
        command: sleep 4

      - name: remote diff
        command: echo remote diff

      - name: node cmd
        shell: node -e
        command: console.log("node")

      - name: TASK
        env:
          FOO: BAR
          BAR: BAR
        command: |
          echo "TASK: $TASK"
          echo "FOO: $FOO"
          echo "BAR: $BAR"
