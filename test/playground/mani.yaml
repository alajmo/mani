import:
  - ./tmp/projects.yaml

projects:
  example:
    path: .

  tap-report:
    path: frontend/tap-report
    url: https://github.com/alajmo/tap-report
    desc: A tap report theme
    tags: ["frontend", "software"]
    env:
      BRANCH: lala
      FOO: bar
      DATE: $(date)

  dashgrid:
    path: frontend/dashgrid
    url: git+ssh://git@github.com/alajmo/dashgrid.git
    # clone: git clone git@github.com:alajmo/dashgrid # default
    desc: A highly customizable drag-and-drop grid
    tags: [frontend, kaka]
    env:
      branch: hello

  template-generator:
    url: git@github.com:alajmo/template-generator
    desc: A simple bash script used to manage boilerplates
    tags: [cli, bash]

env:
  DATE: $(date -u +"%Y-%m-%dT%H:%M:%S%Z")
  VERSION: v5.1.0
  GIT: git --no-pager

themes:
  circle:
    tree: circle

  default:
    prefix: false

    tree: connected-bold

    text:
      prefix: true

    table:
      format:
        header: title
        row: default

      options:
        draw_border: true
        separate_columns: true
        separate_header: true
        separate_rows: false
        separate_footer: true

      color:
        header:
          project:
            fg: white
            bg: black
            align: left
            attr: bold

          tag:
            fg: green
            bg: black
            align: right
            attr: underline

          desc:
            fg: red
            # bg: black
            align: center
            attr: bold

          task:
            fg: blue
            # bg: black
            align: center
            attr: bold

          rel_path:
            fg: green
            # bg: black
            align: right
            attr: normal

          path:
            fg: green
            # bg: black
            align: right
            attr: normal

          url:
            fg: green
            # bg: black
            align: right
            attr: normal

          output:
            fg: hi_red
            # bg: black
            align: right
            attr: normal


        row:
          project:
            fg: hi_green
            bg: black
            align: left
            attr: normal

          tag:
            fg: magenta
            bg: black
            align: right
            attr: normal

          desc:
            fg: green
            # bg: black
            align: right
            attr: normal

          task:
            fg: yellow
            # bg: black
            align: right
            attr: normal

          rel_path:
            fg: green
            # bg: black
            align: right
            attr: normal

          path:
            fg: green
            # bg: black
            align: right
            attr: normal

          url:
            fg: green
            # bg: black
            align: right
            attr: normal

          output:
            fg: hi_yellow
            # bg: black
            align: right
            attr: normal


        # border:
        #   header:
        #     fg: yellow
        #     bg: black

        #   row:
        #     fg: yellow
        #     bg: black

        #   row_alt:
        #     fg: yellow
        #     bg: black

        #   footer:
        #     fg: yellow
        #     bg: black

specs:
  default:
    output: text
    parallel: false
    ignore_error: false

  advanced:
    output: table
    parallel: false
    ignore_error: true
    omit_empty: false

targets:
  default:
    all: true

  single:
    projects: [tap-report]

  advanced:
    all: true
    cwd: true
    projects: [tap-report]
    tags: [frontend,software]
    paths: [frontend,frontend]

  all:
    all: true

tasks:
  test:
    desc: simple test task
    env:
      # BRANCH: lala
      FOO: bar
      DATE: $(date)

    target: single

    spec:
      output: text
      # omit_empty: true

    # commands:
    #   - task: random-data-1
    #   - task: echo
    #   - task: random-data
    #   - task: ping

    cmd: echo "$BRANCH"
    # cmd: echo "Hello World!"

  random-data-1:
    desc: generate random data
    cmd: |
      echo "RANDOM-DATA-1"
      jot -r 2
      sleep 2
      jot -r 10
      sleep 2

  random-data:
    desc: generate random data
    cmd: |
      # jot -r 1
      echo "RANDOM-DATA"

      jot -r 2
      sleep 2
      jot -r 2
      sleep 2

  text:
    desc: test text info
    env:
      BRANCH: lala
      FOO: bar
      DATE: $(date)
    target: single
    spec:
      output: text
    commands:
      - task: echo
      - cmd: echo lala
    cmd: echo hi

  status:
    desc: git status
    target: single
    spec:
      output: text
    commands:
      - mcd: git status
      - cmd: git branch

    cmd: echo done

  table:
    env:
      BRANCH: lala
      FOO: bar
      DATE: $(date)
    target: single
    spec:
      output: table
    commands:
      - task: echo
      - cmd: echo lala
    cmd: echo hi

  echo:
    desc: Print hello world
    cmd: echo "hello world"

  ping:
    desc: ping server
    cmd: echo pong

  # echo:
  #   desc: Print hello world
  #   # target:
  #   #   paths: [frontend]
  #   #   # projects: [pinto]

  #   cmd: |
  #     # sleep $(echo $RANDOM % 1 + 1 | bc; )
  #     echo "hello world"
  #     grep name package.json
  #     # grep --color=auto name package.json
  #     if [ -t 1 ] ; then echo \"terminal\"; else echo \"not a terminal\"; fi

  sleep:
    theme: default
    # target:
    #   paths: [frontend]
    cmd: |
      sleep 5
      pwd

  install:
    desc: npm install
    cmd: npm install

  spec:
    desc: testing spec
    # spec: advanced
    cmd: echo spec

  fail:
    cmd: exit 1

  beta:
    target: all
    shell: node
    cmd: console.log(123)

  refs:
    desc: Run multiple commands
    spec: advanced
    target: all
    shell: node

    commands:
      - task: beta
      - task: test
      - task: test
