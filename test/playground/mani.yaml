import:
  - ./tmp/projects.yaml

projects:
  example:
    path: .

  tap-report:
    path: frontend/tap-report
    url: https://github.com/alajmo/tap-report
    desc: A tap report theme
    tags: [frontend]
    env:
      branch: lala

  dashgrid:
    path: frontend/dashgrid
    url: git+ssh://git@github.com/alajmo/dashgrid.git
    # clone: git clone git@github.com:alajmo/dashgrid # default
    desc: A highly customizable drag-and-drop grid
    tags: [frontend, kaka]
    env:
      branch: hello

  template-generator:
    url: git@github.com:alajmo/template-generator
    desc: A simple bash script used to manage boilerplates
    tags: [cli, bash]

env:
  DATE: $(date -u +"%Y-%m-%dT%H:%M:%S%Z")
  VERSION: v5.1.0
  GIT: git --no-pager

themes:
  default:
    # table: ascii
    tree: connected-bold

  circle:
    table: ascii
    tree: circle

specs:
  default:
    output: text
    parallel: false
    ignore_error: false

  advanced:
    output: table
    parallel: false
    ignore_error: true
    omit_empty: true

targets:
  advanced:
    projects: [tap-report]
    # all: true

  all:
    all: true

tasks:
  test:
    spec: advanced
    target: all
    cmd: echo $branch

  echo:
    desc: Print hello world
    # target:
    #   paths: [frontend]
    #   # projects: [pinto]

    cmd: |
      # sleep $(echo $RANDOM % 1 + 1 | bc; )
      echo "hello world"
      grep name package.json
      # grep --color=auto name package.json
      if [ -t 1 ] ; then echo \"terminal\"; else echo \"not a terminal\"; fi

  beta:
    cmd: echo beta

  sleep:
    theme: default
    # target:
    #   paths: [frontend]
    cmd: |
      sleep 5
      pwd

  install:
    desc: npm install
    cmd: npm install

  spec:
    desc: testing spec
    # spec: advanced
    cmd: echo spec

  fail:
    cmd: exit 1

  refs:
    desc: Run multiple commands
    spec: advanced
    target: all

    cmd: echo 123
    commands:
      - task: test
      - task: fail
      - task: beta
